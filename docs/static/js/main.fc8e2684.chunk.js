(this.webpackJsonpintroverse=this.webpackJsonpintroverse||[]).push([[0],{106:function(e,t){e.exports=function(e){switch(e){case"production":case"development":return{networkId:"default",nodeUrl:"https://rpc.nearprotocol.com",contractName:"introverse",walletUrl:"https://wallet.nearprotocol.com",helperUrl:"https://near-contract-helper.onrender.com"};case"staging":return{networkId:"staging",nodeUrl:"https://staging-rpc.nearprotocol.com/",contractName:"introverse",walletUrl:"https://near-wallet-staging.onrender.com",helperUrl:"https://near-contract-helper-staging.onrender.com"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:"introverse"};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"http://shared-test.nearprotocol.com:3030",contractName:"introverse",masterAccount:"test.near"};case"ci-staging":return{networkId:"shared-test-staging",nodeUrl:"http://staging-shared-test.nearprotocol.com:3030",contractName:"introverse",masterAccount:"test.near"};case"tatooine":return{networkId:"tatooine",nodeUrl:"https://rpc.tatooine.nearprotocol.com",contractName:"introverse",walletUrl:"https://wallet.tatooine.nearprotocol.com"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},112:function(e,t,n){e.exports=n(186)},117:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},118:function(e,t,n){e.exports=n.p+"static/media/near.53ae53eb.svg"},132:function(e,t,n){},147:function(e,t){},149:function(e,t){},167:function(e,t){},173:function(e,t){},186:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(38),c=n(0),i=n.n(c),s=n(26),l=n.n(s),u=n(44),d=n(28),h=n(45),p=n(46),g=n(7),w=n(49),f=n(39),m=n(29),v=(n(117),n(98)),b=n.n(v),E=n(99),k=n.n(E),O=(n(118),n(100)),S=n.n(O),y={header:!0,dynamicTyping:!0,skipEmptyLines:!0,transformHeader:function(e){return e.toLowerCase().replace(/\W/g,"_")}},D=function(e){var t=function(e){return e.map((function(e){var t=e.first_name,n=e.last_name;return"".concat(t," ").concat(n)}))};return i.a.createElement("div",{className:"container"},i.a.createElement(S.a,{cssClass:"react-csv-input",label:e.label,onFileLoaded:function(n,a){e.handleData(t(n))},parserOptions:y}))},I=[["Peter DePaulo","Turtle Forbes","Chortle Corporate"],["Peter DePaulo","B","C"],["Peter DePaulo","Gorpy Norpy","D","Sasha"],["Peter DePaulo","Turtle Forbes","Sasha"],["Peter DePaulo","Forpes Dorpes","Sasha"],["Peter DePaulo","Sasha","Beyonce","Ashton"]],C=n(202),j=n(203),N=n(107),U=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={showData:!1},n.fuckIt=n.fuckIt.bind(Object(g.a)(n)),n.showTheData=n.showTheData.bind(Object(g.a)(n)),n}return Object(w.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log(this.fuckIt(I))}},{key:"showTheData",value:function(){this.setState({showData:!0})}},{key:"fuckIt",value:function(e){for(var t={},n=[],a=[],o=0;o<e.length;o++)for(var r=0;r<e[o].length;r++){if(!t[e[o][r]]){t[e[o][r]]=!0;var c={id:e[o][r],name:e[o][r]};n.push(c)}var i={source:e[o][r],target:e[o][r+1]};void 0!=i.target&&a.push(i)}return{nodes:n,links:a}}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement(f.b,{to:"/"},"Go Back         "),i.a.createElement("button",{onClick:this.showTheData},"Show Data"),this.state.showData?i.a.createElement(C.a,null,I.map((function(e){var t="list-label-".concat(e.join());return i.a.createElement(j.a,{key:t},e.join("--\x3e"))}))):"",i.a.createElement(N.a,{graphData:this.fuckIt(I)}),",")}}]),t}(c.Component);n(132);function A(e,t){return window.localStorage.setItem(e,JSON.stringify(t))}function P(e){return JSON.parse(window.localStorage.getItem(e))}var x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={login:!1,speech:null,profileName:"there"},n.signedInFlow=n.signedInFlow.bind(Object(g.a)(n)),n.requestSignIn=n.requestSignIn.bind(Object(g.a)(n)),n.requestSignOut=n.requestSignOut.bind(Object(g.a)(n)),n.signedOutFlow=n.signedOutFlow.bind(Object(g.a)(n)),n.handleConnectionsData=n.handleConnectionsData.bind(Object(g.a)(n)),n.handleProfileData=n.handleProfileData.bind(Object(g.a)(n)),n.uploading=!1,n}return Object(w.a)(t,e),Object(d.a)(t,[{key:"init",value:function(){var e=this,t=P("profile"),n=P("connections"),a=!!P("graphUploaded");console.log(t,n),this.setState({profileAdded:!!t,profile:t,connectionsAdded:!!n,connections:n,graphUploaded:a},(function(){e.handleData()}))}},{key:"componentDidMount",value:function(){this.init(),this.props.wallet.isSignedIn()?this.signedInFlow():this.signedOutFlow()}},{key:"signedInFlow",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("come in sign in flow"),this.setState({login:!0}),e.next=4,this.props.wallet.getAccountId();case 4:e.sent,window.location.search.includes("account_id")&&window.location.replace(window.location.origin+window.location.pathname);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignIn",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"Sasha's Services",e.next=3,this.props.wallet.requestSignIn("","Sasha's Services");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignOut",value:function(){A("profile",null),A("connections",null),A("numUploaded",0),this.setState({profile:"there",login:!1}),this.props.wallet.signOut(),setTimeout(this.signedOutFlow,500),console.log("after sign out",this.props.wallet.isSignedIn())}},{key:"signedOutFlow",value:function(){window.location.search.includes("account_id")&&window.location.replace(window.location.origin+window.location.pathname),this.setState({login:!1,speech:null})}},{key:"handleData",value:function(){var e=this;if(this.state.connections&&this.state.profileName&&!this.uploading&&!this.state.graphUploaded){this.uploading=!0,console.log("Uploading your data...");for(var t=Promise.resolve(),n=function(n){t=t.then((function(){return e.props.contract.add_edges({fullname:e.state.profileName,edges:e.state.connections.slice(n,n+50)},2e15).then((function(){console.log("Uploading "+n+" out of "+e.state.connections.length+" DONE!!!"),A("numUploaded",n+50)}))}))},a=P("numUploaded");a<this.state.connections.length;a+=50)n(a);t.then((function(){console.log("all done"),A("graphUploaded",!0),e.setState({graphUploaded:!0})}))}}},{key:"handleConnectionsData",value:function(e){var t=this;e&&(this.setState({connections:e,connectionsAdded:!0},(function(){t.handleData()})),A("connections",e),this.handleData())}},{key:"handleProfileData",value:function(e){var t=this,n=e[0];e&&(this.setState({profileName:n,profileAdded:!0},(function(){t.handleData()})),A("profile",n))}},{key:"render",value:function(){var e=this,t={fontSize:"1.5rem",color:"#0072CE",textShadow:"1px 1px #D1CCBD"};return i.a.createElement(f.a,null,i.a.createElement(m.c,null,i.a.createElement(m.a,{exact:!0,path:"/",render:function(n){return i.a.createElement("div",{className:"App-header"},i.a.createElement("div",{className:"image-wrapper"},e.state.login?i.a.createElement("img",{className:"logo",src:k.a,alt:"INTROVERSE logo"}):i.a.createElement("img",{className:"logo",src:b.a,alt:"INTROVERSE logo"}),i.a.createElement("p",{style:t},"Hi, ",e.state.profileName,"!"),e.state.connectionsAdded&&i.a.createElement(f.b,{to:"/connections"}," View My Connections ")),i.a.createElement("div",null,e.state.login?i.a.createElement("div",{style:{color:"black"}},i.a.createElement("div",null,e.state.profileAdded?i.a.createElement("p",null,'"Profile Added"'):i.a.createElement(D,{label:"Add your Profile here: ",handleData:e.handleProfileData}),e.state.connectionsAdded?i.a.createElement("p",null,'"Connections Added"'):i.a.createElement(D,{label:"Add your Connections here: ",handleData:e.handleConnectionsData}))):"Login to upload your homies"),i.a.createElement("div",null,e.state.login?i.a.createElement("button",{onClick:e.requestSignOut},"Log out"):i.a.createElement("button",{onClick:e.requestSignIn},"Log in with NEAR")))}}),i.a.createElement(m.a,{path:"/connections",render:function(e){return i.a.createElement(U,e)}})))}}]),t}(c.Component),_=n(106),F=n.n(_),T=n(33);n(63);function q(){return(q=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.nearConfig=F()("production"),console.log("nearConfig",window.nearConfig),e.next=4,T.connect(Object.assign({deps:{keyStore:new T.keyStores.BrowserLocalStorageKeyStore}},window.nearConfig));case 4:return window.near=e.sent,window.walletAccount=new T.WalletAccount(window.near),window.accountId=window.walletAccount.getAccountId(),e.next=9,new T.Account(window.near.connection,window.accountId);case 9:return t=e.sent,e.next=12,new T.Contract(t,window.nearConfig.contractName,{viewMethods:["search","get_graph","get_on_chain_graph","is_on_chain"],changeMethods:["add_edges"],sender:window.accountId});case 12:window.contract=e.sent;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return q.apply(this,arguments)}().then((function(){l.a.render(i.a.createElement(x,{contract:window.contract,wallet:window.walletAccount}),document.getElementById("root"))})).catch(console.error)},98:function(e,t,n){e.exports=n.p+"static/media/logo.5254dfbb.png"},99:function(e,t,n){e.exports=n.p+"static/media/logo2.c7477cc4.png"}},[[112,1,2]]]);
//# sourceMappingURL=main.fc8e2684.chunk.js.map
{"version":3,"sources":["UploadCSV.js","App.js","index.js","assets/logo.svg","assets/gray_near_logo.svg","assets/near.svg","config.js"],"names":["parseOptions","header","dynamicTyping","skipEmptyLines","transformHeader","toLowerCase","replace","reader","props","parseNames","data","map","line","firstName","first_name","lastName","last_name","className","cssClass","label","onFileLoaded","fileName","handleData","parserOptions","App","state","login","speech","profileName","addedProfile","addedConnections","signedInFlow","bind","requestSignIn","requestSignOut","signedOutFlow","handleConnectionsData","handleProfileData","this","wallet","isSignedIn","console","log","setState","getAccountId","accountId","window","location","search","includes","origin","pathname","contract","welcome","name","then","response","text","nearConfig","contractName","signOut","setTimeout","connections","connectionsAdded","fullName","profileAdded","src","nearlogo","alt","style","fontSize","color","textShadow","onClick","near","logo","Component","a","getConfig","process","nearlib","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","walletAccount","connection","acct","viewMethods","changeMethods","sender","nearInitPromise","initContract","ReactDOM","render","document","getElementById","catch","error","module","exports","CONTRACT_NAME","env","networkId","nodeUrl","walletUrl","helperUrl","keyPath","HOME","masterAccount","Error"],"mappings":"0UAGMA,EAAe,CACnBC,QAAQ,EACRC,eAAe,EACfC,gBAAgB,EAChBC,gBAAiB,SAAAH,GAAM,OAAIA,EAAOI,cAAcC,QAAQ,MAAO,OA8BlDC,EA3BA,SAAAC,GAEb,IAKMC,EAAa,SAAAC,GACjB,OAAOA,EAAKC,KAAI,SAAAC,GACd,IAAIC,EAAYD,EAAKE,WACjBC,EAAWH,EAAKI,UACpB,MAAM,GAAN,OAAWH,EAAX,YAAwBE,OAI5B,OACE,yBAAKE,UAAU,aACb,kBAAC,IAAD,CACEC,SAAS,kBACTC,MAAOX,EAAMW,MACbC,aAlBc,SAACV,EAAMW,GAEzBb,EAAMc,WAAWb,EAAWC,KAiBxBa,cAAevB,MC0GRwB,G,kBAjIb,WAAYhB,GAAQ,IAAD,8BACjB,4CAAMA,KACDiB,MAAQ,CACXC,OAAO,EACPC,OAAQ,KACRC,YAAa,QACbC,cAAc,EACdC,kBAAkB,GAEpB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,cAAgB,EAAKA,cAAcD,KAAnB,gBACrB,EAAKE,eAAiB,EAAKA,eAAeF,KAApB,gBACtB,EAAKG,cAAgB,EAAKA,cAAcH,KAAnB,gBACrB,EAAKI,sBAAwB,EAAKA,sBAAsBJ,KAA3B,gBAC7B,EAAKK,kBAAoB,EAAKA,kBAAkBL,KAAvB,gBAdR,E,iFAmBFM,KAAK9B,MAAM+B,OAAOC,aAE/BF,KAAKP,eAELO,KAAKH,kB,mKAKPM,QAAQC,IAAI,wBACZJ,KAAKK,SAAS,CACZjB,OAAO,I,SAEeY,KAAK9B,MAAM+B,OAAOK,e,OAApCC,E,OACFC,OAAOC,SAASC,OAAOC,SAAS,eAClCH,OAAOC,SAASzC,QAAQwC,OAAOC,SAASG,OAASJ,OAAOC,SAASI,UAEnEb,KAAK9B,MAAM4C,SAASC,QAAQ,CAAEC,KAAMT,IAAaU,MAAK,SAAAC,GAAQ,OAAI,EAAKb,SAAS,CAAChB,OAAQ6B,EAASC,U,4PAIjF,iB,SACXnB,KAAK9B,MAAM+B,OAAON,cACtBa,OAAOY,WAAWC,aAFH,kB,6IAQjBrB,KAAK9B,MAAM+B,OAAOqB,UAClBC,WAAWvB,KAAKH,cAAe,KAC/BM,QAAQC,IAAI,iBAAkBJ,KAAK9B,MAAM+B,OAAOC,gB,sCAI5CM,OAAOC,SAASC,OAAOC,SAAS,eAClCH,OAAOC,SAASzC,QAAQwC,OAAOC,SAASG,OAASJ,OAAOC,SAASI,UAEnEb,KAAKK,SAAS,CACZjB,OAAO,EACPC,OAAQ,S,4CAIUjB,GACpB+B,QAAQC,IAAIhC,GAEZ4B,KAAKK,SAAS,CACZmB,YAAapD,EACbqD,kBAAkB,M,wCAIJrD,GAChB,IAAIsD,EAAWtD,EAAK,GACpB4B,KAAKK,SAAS,CACZf,YAAaoC,EACbC,cAAc,M,+BAUhB,OACE,yBAAKhD,UAAU,cACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,OAAOiD,IAAKC,IAAUC,IAAI,cACzC,uBAAGC,MATG,CACVC,SAAU,SACVC,MAAO,UACPC,WAAY,oBAMR,OAAsBlC,KAAKb,MAAMG,YAAjC,MAEF,6BACGU,KAAKb,MAAMC,MACV,yBAAK2C,MAAO,CAACE,MAAM,UACjB,6BACGjC,KAAKb,MAAMwC,aAAe,gBACzB,kBAAC,EAAD,CAAQ9C,MAAO,0BAA2BG,WAAYgB,KAAKD,oBAE5DC,KAAKb,MAAMsC,iBAAmB,oBAC7B,kBAAC,EAAD,CAAQ5C,MAAO,8BAA+BG,WAAYgB,KAAKF,0BAKrE,+BAGJ,6BACGE,KAAKb,MAAMC,MAAQ,4BAAQ+C,QAASnC,KAAKJ,gBAAtB,WAChB,4BAAQuC,QAASnC,KAAKL,eAAtB,qBAGN,6BACE,yBAAKhB,UAAU,gBACb,yBAAKiD,IAAKQ,IAAMzD,UAAU,uBAAuBmD,IAAI,SACrD,yBAAKF,IAAKS,IAAM1D,UAAU,WAAWmD,IAAI,UAE3C,mCACO,4CADP,8B,GAvHQQ,c,2ECElB,4BAAAC,EAAA,6DACI/B,OAAOY,WAAaoB,IAAUC,cAC9BtC,QAAQC,IAAI,aAAcI,OAAOY,YAFrC,SAKwBsB,UAAgBC,OAAOC,OAAO,CAAEC,KAAM,CAAEC,SAAU,IAAIJ,YAAkBK,8BAAmCvC,OAAOY,aAL1I,cAKIZ,OAAO4B,KALX,OAQI5B,OAAOwC,cAAgB,IAAIN,gBAAsBlC,OAAO4B,MAGxD5B,OAAOD,UAAYC,OAAOwC,cAAc1C,eAX5C,SAcqB,IAAIoC,UAAgBlC,OAAO4B,KAAKa,WAAYzC,OAAOD,WAdxE,cAcQ2C,EAdR,iBAe4B,IAAIR,WAAiBQ,EAAM1C,OAAOY,WAAWC,aAAc,CAE/E8B,YAAa,CAAC,WAEdC,cAAe,GAEfC,OAAQ7C,OAAOD,YArBvB,QAeIC,OAAOM,SAfX,oD,sBAyBAN,OAAO8C,gB,0CAAkBC,GAAetC,MAAK,WAC3CuC,IAASC,OAAO,kBAAC,EAAD,CAAK3C,SAAUN,OAAOM,SAAUb,OAAQO,OAAOwC,gBAC7DU,SAASC,eAAe,YAEzBC,MAAMzD,QAAQ0D,Q,mBCtCjBC,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,4C,mBCA3CD,EAAOC,QAAU,IAA0B,kC,iBCA3C,IAAMC,EAAgBvB,8CAAYuB,eAAgB,UAyDlDF,EAAOC,QAvDP,SAAmBE,GACf,OAAQA,GAER,IAAK,aACL,IAAK,cACD,MAAO,CACHC,UAAW,UACXC,QAAS,+BACT9C,aAAc2C,EACdI,UAAW,kCACXC,UAAW,6CAEnB,IAAK,UACD,MAAO,CACHH,UAAW,UACXC,QAAS,wCACT9C,aAAc2C,EACdI,UAAW,2CACXC,UAAW,qDAEnB,IAAK,QACD,MAAO,CACHH,UAAW,QACXC,QAAS,wBACTG,QAAQ,GAAD,OAAK7B,8CAAY8B,KAAjB,6BACPH,UAAW,+BACX/C,aAAc2C,GAEtB,IAAK,OACL,IAAK,KACD,MAAO,CACHE,UAAW,cACXC,QAAS,2CACT9C,aAAc2C,EACdQ,cAAe,aAEvB,IAAK,aACD,MAAO,CACHN,UAAW,sBACXC,QAAS,mDACT9C,aAAc2C,EACdQ,cAAe,aAEvB,IAAK,WACD,MAAO,CACHN,UAAW,WACXC,QAAS,wCACT9C,aAAc2C,EACdI,UAAW,4CAEnB,QACI,MAAMK,MAAM,6BAAD,OAA8BR,EAA9B,8C","file":"static/js/main.fa93a57e.chunk.js","sourcesContent":["import React from \"react\";\nimport CSVReader from \"react-csv-reader\";\n\nconst parseOptions = {\n  header: true,\n  dynamicTyping: true,\n  skipEmptyLines: true,\n  transformHeader: header => header.toLowerCase().replace(/\\W/g, \"_\")\n};\n\nconst reader = props => {\n\n  const handleForce = (data, fileName) => {\n    // console.log(parseNames(data));\n    props.handleData(parseNames(data));\n  };\n\n  const parseNames = data => {\n    return data.map(line => {\n      let firstName = line.first_name;\n      let lastName = line.last_name;\n      return  `${firstName} ${lastName}`\n    });\n  }\n\n  return (\n    <div className=\"container\">\n      <CSVReader\n        cssClass=\"react-csv-input\"\n        label={props.label}\n        onFileLoaded={handleForce}\n        parserOptions={parseOptions}\n      />\n    </div>\n  )\n};\n\nexport default reader;\n","import React, { Component } from 'react';\nimport logo from './assets/logo.svg';\nimport nearlogo from './assets/gray_near_logo.svg';\nimport near from './assets/near.svg';\nimport Reader from './UploadCSV.js'\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: false,\n      speech: null,\n      profileName: \"there\",\n      addedProfile: false,\n      addedConnections: false\n    }\n    this.signedInFlow = this.signedInFlow.bind(this);\n    this.requestSignIn = this.requestSignIn.bind(this);\n    this.requestSignOut = this.requestSignOut.bind(this);\n    this.signedOutFlow = this.signedOutFlow.bind(this);\n    this.handleConnectionsData = this.handleConnectionsData.bind(this);\n    this.handleProfileData = this.handleProfileData.bind(this);\n\n  }\n\n  componentDidMount() {\n    let loggedIn = this.props.wallet.isSignedIn();\n    if (loggedIn) {\n      this.signedInFlow();\n    } else {\n      this.signedOutFlow();\n    }\n  }\n\n  async signedInFlow() {\n    console.log(\"come in sign in flow\")\n    this.setState({\n      login: true,\n    })\n    const accountId = await this.props.wallet.getAccountId()\n    if (window.location.search.includes(\"account_id\")) {\n      window.location.replace(window.location.origin + window.location.pathname)\n    }\n    this.props.contract.welcome({ name: accountId }).then(response => this.setState({speech: response.text}))\n  }\n\n  async requestSignIn() {\n    const appTitle = 'Sasha Services';\n    await this.props.wallet.requestSignIn(\n      window.nearConfig.contractName,\n      appTitle\n    )\n  }\n\n  requestSignOut() {\n    this.props.wallet.signOut();\n    setTimeout(this.signedOutFlow, 500);\n    console.log(\"after sign out\", this.props.wallet.isSignedIn())\n  }\n\n  signedOutFlow() {\n    if (window.location.search.includes(\"account_id\")) {\n      window.location.replace(window.location.origin + window.location.pathname)\n    }\n    this.setState({\n      login: false,\n      speech: null\n    })\n  }\n\n  handleConnectionsData(data) {\n    console.log(data);\n    // pass data to the server\n    this.setState({\n      connections: data,\n      connectionsAdded: true\n    })\n  }\n\n  handleProfileData(data) {\n    let fullName = data[0]\n    this.setState({\n      profileName: fullName,\n      profileAdded: true\n    });\n  }\n\n  render() {\n    let style = {\n      fontSize: \"1.5rem\",\n      color: \"#0072CE\",\n      textShadow: \"1px 1px #D1CCBD\"\n    }\n    return (\n      <div className=\"App-header\">\n        <div className=\"image-wrapper\">\n          <img className=\"logo\" src={nearlogo} alt=\"NEAR logo\" />\n          <p style={style}>Hi, {this.state.profileName}!</p>\n        </div>\n        <div>\n          {this.state.login ? \n            <div style={{color:\"black\"}}>\n              <div>\n                {this.state.profileAdded ? \"Profile Added\" :\n                  <Reader label={\"Add your Profile here: \"} handleData={this.handleProfileData} />\n                }\n                {this.state.connectionsAdded ? \"Connections Added\" : \n                  <Reader label={\"Add your Connections here: \"} handleData={this.handleConnectionsData} />\n                }\n              </div>\n            </div>\n            :\n            \"Login to upload your homies\"\n          }\n        </div>\n        <div>\n          {this.state.login ? <button onClick={this.requestSignOut}>Log out</button>\n            : <button onClick={this.requestSignIn}>Log in with NEAR</button>}\n        </div>\n\n        <div>\n          <div className=\"logo-wrapper\">\n            <img src={near} className=\"App-logo margin-logo\" alt=\"logo\" />\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          </div>\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport getConfig from './config.js';\nimport * as nearlib from 'nearlib';\n// This is to help with building\nimport 'regenerator-runtime/runtime'\n\n// Initializing contract\nasync function initContract() {\n    window.nearConfig = getConfig(process.env.NODE_ENV || 'development')\n    console.log(\"nearConfig\", window.nearConfig);\n\n    // Initializing connection to the NEAR DevNet.\n    window.near = await nearlib.connect(Object.assign({ deps: { keyStore: new nearlib.keyStores.BrowserLocalStorageKeyStore() } }, window.nearConfig));\n    \n    // Needed to access wallet login\n    window.walletAccount = new nearlib.WalletAccount(window.near);\n    \n    // Getting the Account ID. If unauthorized yet, it's just empty string.\n    window.accountId = window.walletAccount.getAccountId();\n\n    // Initializing our contract APIs by contract name and configuration.\n    let acct = await new nearlib.Account(window.near.connection, window.accountId);\n    window.contract = await new nearlib.Contract(acct, window.nearConfig.contractName, {\n        // View methods are read only. They don't modify the state, but usually return some value.\n        viewMethods: ['welcome'],\n        // Change methods can modify the state. But you don't receive the returned value when called.\n        changeMethods: [],\n        // Sender is the account ID to initialize transactions.\n        sender: window.accountId\n    });\n}\n\nwindow.nearInitPromise = initContract().then(() => {\n  ReactDOM.render(<App contract={window.contract} wallet={window.walletAccount} />,\n    document.getElementById('root')\n  );\n}).catch(console.error)","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","module.exports = __webpack_public_path__ + \"static/media/gray_near_logo.55517b93.svg\";","module.exports = __webpack_public_path__ + \"static/media/near.53ae53eb.svg\";","const CONTRACT_NAME = process.env.CONTRACT_NAME ||'nearapp'; /* TODO: fill this in! */\n\nfunction getConfig(env) {\n    switch (env) {\n\n    case 'production':\n    case 'development':\n        return {\n            networkId: 'default',\n            nodeUrl: 'https://rpc.nearprotocol.com',\n            contractName: CONTRACT_NAME,\n            walletUrl: 'https://wallet.nearprotocol.com',\n            helperUrl: 'https://near-contract-helper.onrender.com',\n        };\n    case 'staging':\n        return {\n            networkId: 'staging',\n            nodeUrl: 'https://staging-rpc.nearprotocol.com/',\n            contractName: CONTRACT_NAME,\n            walletUrl: 'https://near-wallet-staging.onrender.com',\n            helperUrl: 'https://near-contract-helper-staging.onrender.com',\n        };\n    case 'local':\n        return {\n            networkId: 'local',\n            nodeUrl: 'http://localhost:3030',\n            keyPath: `${process.env.HOME}/.near/validator_key.json`,\n            walletUrl: 'http://localhost:4000/wallet',\n            contractName: CONTRACT_NAME,\n        };\n    case 'test':\n    case 'ci':\n        return {\n            networkId: 'shared-test',\n            nodeUrl: 'http://shared-test.nearprotocol.com:3030',\n            contractName: CONTRACT_NAME,\n            masterAccount: 'test.near',\n        };\n    case 'ci-staging':\n        return {\n            networkId: 'shared-test-staging',\n            nodeUrl: 'http://staging-shared-test.nearprotocol.com:3030',\n            contractName: CONTRACT_NAME,\n            masterAccount: 'test.near',\n        };\n    case 'tatooine':\n        return {\n            networkId: 'tatooine',\n            nodeUrl: 'https://rpc.tatooine.nearprotocol.com',\n            contractName: CONTRACT_NAME,\n            walletUrl: 'https://wallet.tatooine.nearprotocol.com',\n        };\n    default:\n        throw Error(`Unconfigured environment '${env}'. Can be configured in src/config.js.`);\n    }\n}\n\nmodule.exports = getConfig;\n"],"sourceRoot":""}
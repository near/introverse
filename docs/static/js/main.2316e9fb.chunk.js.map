{"version":3,"sources":["App.js","index.js","assets/logo.svg","assets/gray_near_logo.svg","assets/near.svg","config.js"],"names":["App","props","state","login","speech","signedInFlow","bind","requestSignIn","requestSignOut","signedOutFlow","this","wallet","isSignedIn","console","log","setState","getAccountId","accountId","window","location","search","includes","replace","origin","pathname","contract","welcome","name","then","response","text","nearConfig","contractName","signOut","setTimeout","className","src","nearlogo","alt","role","aria-label","style","fontSize","color","textShadow","onClick","near","logo","href","target","rel","Component","a","getConfig","process","nearlib","Object","assign","deps","keyStore","BrowserLocalStorageKeyStore","walletAccount","connection","acct","viewMethods","changeMethods","sender","nearInitPromise","initContract","ReactDOM","render","document","getElementById","catch","error","module","exports","CONTRACT_NAME","env","networkId","nodeUrl","walletUrl","helperUrl","keyPath","HOME","masterAccount","Error"],"mappings":"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","file":"static/js/main.2316e9fb.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport logo from './assets/logo.svg';\nimport nearlogo from './assets/gray_near_logo.svg';\nimport near from './assets/near.svg';\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      login: false,\n      speech: null\n    }\n    this.signedInFlow = this.signedInFlow.bind(this);\n    this.requestSignIn = this.requestSignIn.bind(this);\n    this.requestSignOut = this.requestSignOut.bind(this);\n    this.signedOutFlow = this.signedOutFlow.bind(this);\n  }\n\n  componentDidMount() {\n    let loggedIn = this.props.wallet.isSignedIn();\n    if (loggedIn) {\n      this.signedInFlow();\n    } else {\n      this.signedOutFlow();\n    }\n  }\n\n  async signedInFlow() {\n    console.log(\"come in sign in flow\")\n    this.setState({\n      login: true,\n    })\n    const accountId = await this.props.wallet.getAccountId()\n    if (window.location.search.includes(\"account_id\")) {\n      window.location.replace(window.location.origin + window.location.pathname)\n    }\n    this.props.contract.welcome({ name: accountId }).then(response => this.setState({speech: response.text}))\n  }\n\n  async requestSignIn() {\n    const appTitle = 'NEAR React template';\n    await this.props.wallet.requestSignIn(\n      window.nearConfig.contractName,\n      appTitle\n    )\n  }\n\n  requestSignOut() {\n    this.props.wallet.signOut();\n    setTimeout(this.signedOutFlow, 500);\n    console.log(\"after sign out\", this.props.wallet.isSignedIn())\n  }\n\n  signedOutFlow() {\n    if (window.location.search.includes(\"account_id\")) {\n      window.location.replace(window.location.origin + window.location.pathname)\n    }\n    this.setState({\n      login: false,\n      speech: null\n    })\n  }\n\n  render() {\n    let style = {\n      fontSize: \"1.5rem\",\n      color: \"#0072CE\",\n      textShadow: \"1px 1px #D1CCBD\"\n    }\n    return (\n      <div className=\"App-header\">\n        <div className=\"image-wrapper\">\n          <img className=\"logo\" src={nearlogo} alt=\"NEAR logo\" />\n          <p><span role=\"img\" aria-label=\"fish\">üêü</span> NEAR protocol is a new blockchain focused on developer productivity and useability!<span role=\"img\" aria-label=\"fish\">üêü</span></p>\n          <p><span role=\"img\" aria-label=\"chain\">‚õì</span> This little react app is connected to blockchain right now. <span role=\"img\" aria-label=\"chain\">‚õì</span></p>\n          <p style={style}>{this.state.speech}</p>\n        </div>\n        <div>\n          {this.state.login ? <button onClick={this.requestSignOut}>Log out</button>\n            : <button onClick={this.requestSignIn}>Log in with NEAR</button>}\n        </div>\n        <div>\n          <div className=\"logo-wrapper\">\n            <img src={near} className=\"App-logo margin-logo\" alt=\"logo\" />\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          </div>\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n          <p><span role=\"img\" aria-label=\"net\">üï∏</span> <a className=\"App-link\" href=\"https://nearprotocol.com\">NEAR Website</a> <span role=\"img\" aria-label=\"net\">üï∏</span>\n          </p>\n          <p><span role=\"img\" aria-label=\"book\">üìö</span><a className=\"App-link\" href=\"https://docs.nearprotocol.com\"> Learn from NEAR Documentation</a> <span role=\"img\" aria-label=\"book\">üìö</span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport getConfig from './config.js';\nimport * as nearlib from 'nearlib';\n\n// Initializing contract\nasync function initContract() {\n    window.nearConfig = getConfig(process.env.NODE_ENV || 'development')\n    console.log(\"nearConfig\", window.nearConfig);\n\n    // Initializing connection to the NEAR DevNet.\n    window.near = await nearlib.connect(Object.assign({ deps: { keyStore: new nearlib.keyStores.BrowserLocalStorageKeyStore() } }, window.nearConfig));\n    \n    // Needed to access wallet login\n    window.walletAccount = new nearlib.WalletAccount(window.near);\n    \n    // Getting the Account ID. If unauthorized yet, it's just empty string.\n    window.accountId = window.walletAccount.getAccountId();\n\n    // Initializing our contract APIs by contract name and configuration.\n    let acct = await new nearlib.Account(window.near.connection, window.accountId);\n    window.contract = await new nearlib.Contract(acct, window.nearConfig.contractName, {\n        // View methods are read only. They don't modify the state, but usually return some value.\n        viewMethods: ['welcome'],\n        // Change methods can modify the state. But you don't receive the returned value when called.\n        changeMethods: [],\n        // Sender is the account ID to initialize transactions.\n        sender: window.accountId\n    });\n}\n\nwindow.nearInitPromise = initContract().then(() => {\n  ReactDOM.render(<App contract={window.contract} wallet={window.walletAccount} />,\n    document.getElementById('root')\n  );\n}).catch(console.error)","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","module.exports = __webpack_public_path__ + \"static/media/gray_near_logo.55517b93.svg\";","module.exports = __webpack_public_path__ + \"static/media/near.53ae53eb.svg\";","const CONTRACT_NAME = process.env.CONTRACT_NAME ||'nearapp'; /* TODO: fill this in! */\n\nfunction getConfig(env) {\n    switch (env) {\n\n    case 'production':\n    case 'development':\n        return {\n            networkId: 'default',\n            nodeUrl: 'https://rpc.nearprotocol.com',\n            contractName: CONTRACT_NAME,\n            walletUrl: 'https://wallet.nearprotocol.com',\n            helperUrl: 'https://near-contract-helper.onrender.com',\n        };\n    case 'staging':\n        return {\n            networkId: 'staging',\n            nodeUrl: 'https://staging-rpc.nearprotocol.com/',\n            contractName: CONTRACT_NAME,\n            walletUrl: 'https://near-wallet-staging.onrender.com',\n            helperUrl: 'https://near-contract-helper-staging.onrender.com',\n        };\n    case 'local':\n        return {\n            networkId: 'local',\n            nodeUrl: 'http://localhost:3030',\n            keyPath: `${process.env.HOME}/.near/validator_key.json`,\n            walletUrl: 'http://localhost:4000/wallet',\n            contractName: CONTRACT_NAME,\n        };\n    case 'test':\n    case 'ci':\n        return {\n            networkId: 'shared-test',\n            nodeUrl: 'http://shared-test.nearprotocol.com:3030',\n            contractName: CONTRACT_NAME,\n            masterAccount: 'test.near',\n        };\n    case 'ci-staging':\n        return {\n            networkId: 'shared-test-staging',\n            nodeUrl: 'http://staging-shared-test.nearprotocol.com:3030',\n            contractName: CONTRACT_NAME,\n            masterAccount: 'test.near',\n        };\n    case 'tatooine':\n        return {\n            networkId: 'tatooine',\n            nodeUrl: 'https://rpc.tatooine.nearprotocol.com',\n            contractName: CONTRACT_NAME,\n            walletUrl: 'https://wallet.tatooine.nearprotocol.com',\n        };\n    default:\n        throw Error(`Unconfigured environment '${env}'. Can be configured in src/config.js.`);\n    }\n}\n\nmodule.exports = getConfig;\n"],"sourceRoot":""}
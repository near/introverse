(this.webpackJsonpintroverse=this.webpackJsonpintroverse||[]).push([[0],{115:function(e,t){},121:function(e,t){},138:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(19),c=n(0),i=n.n(c),l=n(59),s=n.n(l),p=n(60),u=n(61),d=n(67),w=n(62),m=n(13),g=n(68),h=n(63),f=n.n(h),E=n(64),b=n.n(E),v=n(65),k=n.n(v),N=(n(75),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(w.a)(t).call(this,e))).state={login:!1,speech:null},n.signedInFlow=n.signedInFlow.bind(Object(m.a)(n)),n.requestSignIn=n.requestSignIn.bind(Object(m.a)(n)),n.requestSignOut=n.requestSignOut.bind(Object(m.a)(n)),n.signedOutFlow=n.signedOutFlow.bind(Object(m.a)(n)),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.wallet.isSignedIn()?this.signedInFlow():this.signedOutFlow()}},{key:"signedInFlow",value:function(){var e=Object(r.a)(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("come in sign in flow"),this.setState({login:!0}),e.next=4,this.props.wallet.getAccountId();case 4:t=e.sent,window.location.search.includes("account_id")&&window.location.replace(window.location.origin+window.location.pathname),this.props.contract.welcome({name:t}).then((function(e){return n.setState({speech:e.text})}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignIn",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"NEAR React template",e.next=3,this.props.wallet.requestSignIn(window.nearConfig.contractName,"NEAR React template");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignOut",value:function(){this.props.wallet.signOut(),setTimeout(this.signedOutFlow,500),console.log("after sign out",this.props.wallet.isSignedIn())}},{key:"signedOutFlow",value:function(){window.location.search.includes("account_id")&&window.location.replace(window.location.origin+window.location.pathname),this.setState({login:!1,speech:null})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-header"},i.a.createElement("div",{className:"image-wrapper"},i.a.createElement("img",{className:"logo",src:b.a,alt:"NEAR logo"}),i.a.createElement("p",null,i.a.createElement("span",{role:"img","aria-label":"fish"},"\ud83d\udc1f")," NEAR protocol is a new blockchain focused on developer productivity and useability!",i.a.createElement("span",{role:"img","aria-label":"fish"},"\ud83d\udc1f")),i.a.createElement("p",null,i.a.createElement("span",{role:"img","aria-label":"chain"},"\u26d3")," This little react app is connected to blockchain right now. ",i.a.createElement("span",{role:"img","aria-label":"chain"},"\u26d3")),i.a.createElement("p",{style:{fontSize:"1.5rem",color:"#0072CE",textShadow:"1px 1px #D1CCBD"}},this.state.speech)),i.a.createElement("div",null,this.state.login?i.a.createElement("button",{onClick:this.requestSignOut},"Log out"):i.a.createElement("button",{onClick:this.requestSignIn},"Log in with NEAR")),i.a.createElement("div",null,i.a.createElement("div",{className:"logo-wrapper"},i.a.createElement("img",{src:k.a,className:"App-logo margin-logo",alt:"logo"}),i.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"})),i.a.createElement("p",null,"Edit ",i.a.createElement("code",null,"src/App.js")," and save to reload."),i.a.createElement("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"},"Learn React"),i.a.createElement("p",null,i.a.createElement("span",{role:"img","aria-label":"net"},"\ud83d\udd78")," ",i.a.createElement("a",{className:"App-link",href:"https://nearprotocol.com"},"NEAR Website")," ",i.a.createElement("span",{role:"img","aria-label":"net"},"\ud83d\udd78")),i.a.createElement("p",null,i.a.createElement("span",{role:"img","aria-label":"book"},"\ud83d\udcda"),i.a.createElement("a",{className:"App-link",href:"https://docs.nearprotocol.com"}," Learn from NEAR Documentation")," ",i.a.createElement("span",{role:"img","aria-label":"book"},"\ud83d\udcda"))))}}]),t}(c.Component)),O=n(66),I=n.n(O),A=n(15);function y(){return(y=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.nearConfig=I()("production"),console.log("nearConfig",window.nearConfig),e.next=4,A.connect(Object.assign({deps:{keyStore:new A.keyStores.BrowserLocalStorageKeyStore}},window.nearConfig));case 4:return window.near=e.sent,window.walletAccount=new A.WalletAccount(window.near),window.accountId=window.walletAccount.getAccountId(),e.next=9,new A.Account(window.near.connection,window.accountId);case 9:return t=e.sent,e.next=12,new A.Contract(t,window.nearConfig.contractName,{viewMethods:["welcome"],changeMethods:[],sender:window.accountId});case 12:window.contract=e.sent;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.nearInitPromise=function(){return y.apply(this,arguments)}().then((function(){s.a.render(i.a.createElement(N,{contract:window.contract,wallet:window.walletAccount}),document.getElementById("root"))})).catch(console.error)},63:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},64:function(e,t,n){e.exports=n.p+"static/media/gray_near_logo.55517b93.svg"},65:function(e,t,n){e.exports=n.p+"static/media/near.53ae53eb.svg"},66:function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:""}).CONTRACT_NAME||"nearapp";e.exports=function(e){switch(e){case"production":case"development":return{networkId:"default",nodeUrl:"https://rpc.nearprotocol.com",contractName:n,walletUrl:"https://wallet.nearprotocol.com",helperUrl:"https://near-contract-helper.onrender.com"};case"staging":return{networkId:"staging",nodeUrl:"https://staging-rpc.nearprotocol.com/",contractName:n,walletUrl:"https://near-wallet-staging.onrender.com",helperUrl:"https://near-contract-helper-staging.onrender.com"};case"local":return{networkId:"local",nodeUrl:"http://localhost:3030",keyPath:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).HOME,"/.near/validator_key.json"),walletUrl:"http://localhost:4000/wallet",contractName:n};case"test":case"ci":return{networkId:"shared-test",nodeUrl:"http://shared-test.nearprotocol.com:3030",contractName:n,masterAccount:"test.near"};case"ci-staging":return{networkId:"shared-test-staging",nodeUrl:"http://staging-shared-test.nearprotocol.com:3030",contractName:n,masterAccount:"test.near"};case"tatooine":return{networkId:"tatooine",nodeUrl:"https://rpc.tatooine.nearprotocol.com",contractName:n,walletUrl:"https://wallet.tatooine.nearprotocol.com"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}},69:function(e,t,n){e.exports=n(138)},75:function(e,t,n){},90:function(e,t){},92:function(e,t){}},[[69,1,2]]]);
//# sourceMappingURL=main.2316e9fb.chunk.js.map